<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Variants and the List Type - Functional Programming with OCaml</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "coal" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../preface/preface.html">Preface</a></li><li class="chapter-item expanded "><a href="../introduction/introduction.html">Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../introduction/setup.html">Setup</a></li></ol></li><li class="chapter-item expanded "><a href="../a_mathematical_approach_to_programming/a_mathematical_approach_to_programming.html">A Mathematical Approach to Programming</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../a_mathematical_approach_to_programming/side_effects.html">Side Effects</a></li><li class="chapter-item expanded "><a href="../a_mathematical_approach_to_programming/currying.html">Currying</a></li><li class="chapter-item expanded "><a href="../a_mathematical_approach_to_programming/functions_are_data.html">Functions are Data</a></li></ol></li><li class="chapter-item expanded "><a href="../hello_world/hello_world.html">Hello, World!</a></li><li class="chapter-item expanded "><a href="../temperature_converter/temperature_converter.html">Temperature Converter</a></li><li class="chapter-item expanded "><a href="../project_euler_1/project_euler_1.html">Project Euler 1</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../project_euler_1/if_expressions.html">If Expressions</a></li><li class="chapter-item expanded "><a href="../project_euler_1/recursion.html">Recursion</a></li><li class="chapter-item expanded "><a href="../project_euler_1/putting_it_all_together.html">Putting it all Together</a></li></ol></li><li class="chapter-item expanded "><a href="../grouping_data/grouping_data.html">Grouping Data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../grouping_data/records.html">Records</a></li><li class="chapter-item expanded "><a href="../grouping_data/tuples.html">Tuples</a></li></ol></li><li class="chapter-item expanded "><a href="../linked_lists/linked_lists.html">Linked Lists</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../linked_lists/variants_and_the_list_type.html" class="active">Variants and the List Type</a></li><li class="chapter-item expanded "><a href="../linked_lists/general_functions.html">General Functions</a></li><li class="chapter-item expanded "><a href="../linked_lists/debugging.html">Debugging</a></li><li class="chapter-item expanded "><a href="../linked_lists/map.html">Map</a></li><li class="chapter-item expanded "><a href="../linked_lists/filter.html">Filter</a></li><li class="chapter-item expanded "><a href="../linked_lists/fold.html">Fold</a></li><li class="chapter-item expanded "><a href="../linked_lists/persistence_of_functional_structures.html">Persistence of Functional Structures</a></li><li class="chapter-item expanded "><a href="../linked_lists/the_built_in_list_type.html">The Built in List Type</a></li><li class="chapter-item expanded "><a href="../linked_lists/pipelining.html">Pipelining</a></li><li class="chapter-item expanded "><a href="../linked_lists/exercises.html">Exercises</a></li></ol></li><li class="chapter-item expanded "><a href="../option_type/option_type.html">Option Type</a></li><li class="chapter-item expanded "><a href="../stacks/stacks.html">Stacks</a></li><li class="chapter-item expanded "><a href="../queues/queues.html">Queues</a></li><li class="chapter-item expanded "><a href="../pattern_matching/pattern_matching.html">Pattern Matching</a></li><li class="chapter-item expanded "><a href="../monads/monads.html">Monads</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../monads/option_monad.html">Option Monad</a></li><li class="chapter-item expanded "><a href="../monads/result_monad.html">Result Monad</a></li></ol></li><li class="chapter-item expanded "><a href="../modules_and_multi_file_projects/modules_and_multi_file_projects.html">Modules and Multi File Projects</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../modules_and_multi_file_projects/functors.html">Functors</a></li></ol></li><li class="chapter-item expanded "><a href="../sets_and_maps/sets_and_maps.html">Sets and Maps</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../sets_and_maps/red_black_trees.html">Red Black Trees</a></li></ol></li><li class="chapter-item expanded "><a href="../imperative_programming_in_ocaml/imperative_programming_in_ocaml.html">Imperative Programming in OCaml</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../imperative_programming_in_ocaml/if_statements.html">If Statements</a></li><li class="chapter-item expanded "><a href="../imperative_programming_in_ocaml/references.html">References</a></li><li class="chapter-item expanded "><a href="../imperative_programming_in_ocaml/loops.html">Loops</a></li></ol></li><li class="chapter-item expanded "><a href="../arrays/arrays.html">Arrays</a></li><li class="chapter-item expanded "><a href="../further_reading/further_reading.html">Further Reading</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Functional Programming with OCaml</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/aaron-jack-manning/functional-programming-with-ocaml" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-code-fark"></i>
                        </a>
                        <a href="https://github.com/aaron-jack-manning/functional-programming-with-ocaml/edit/master/guide/src/linked_lists/variants_and_the_list_type.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="variants-and-the-list-type"><a class="header" href="#variants-and-the-list-type">Variants and the List Type</a></h2>
<h3 id="variants-and-pattern-matching"><a class="header" href="#variants-and-pattern-matching">Variants and Pattern Matching</a></h3>
<p>Now let's create our linked list. The first thing we need is some custom data type that represents the nodes of the list. For this we will use a variant.</p>
<p>A variant is a custom type which contains a finite number of distinct cases. We can use variants to create types to represent data that enums would often be used for in other languages. Here are some simple examples of variants.</p>
<pre><code>type boolean =
    | True
    | False
</code></pre>
<pre><code>type day = Monday | Tuesday | Wednesday | Thursday | Friday | Saturday | Sunday
</code></pre>
<p>When declaring a custom type, we need to use the <code>type</code> keyword. That type is then given a name, which, by convension, we use <em>snake_case</em> for. That said, the fact that the types start with a lowercase letter and the names of the cases start with an uppercase letter is enforced by the language.</p>
<p>For a variant type, each case is separated by a <code>|</code>, and a <code>|</code> before the first case is optional. When we create an instance of each of these types, it will be of one of the cases. This is because <em>each case is a constructor for the type</em>. Hence to create an instance of the <code>day</code> type from above, we can write the following code:</p>
<pre><code>let first_day = Monday
</code></pre>
<p>If we want to check if a variable of type <code>day</code> is a specific case, we can just check for equality with <code>=</code> and use an if statement.</p>
<p>There is however a better way of determining the case of a variant, called pattern matching. Pattern matching will be covered more thoroughly in it's own chapter, as it is a very powerful tool available to OCaml programmers. For now though, here is how we can write code for each case in the above variant using a pattern match:</p>
<pre><code>let string_of_day (input_day : day) : string =
    match input_day with
    | Monday -&gt; &quot;monday&quot;
    | Tuesday -&gt; &quot;tuesday&quot;
    | Wednesday -&gt; &quot;wednesday&quot;
    | Thursday -&gt; &quot;thursday&quot;
    | Friday -&gt; &quot;friday&quot;
    | Saturday -&gt; &quot;saturday&quot;
    | Sunday -&gt; &quot;sunday&quot;
</code></pre>
<p>The statement <code>match &lt;variable&gt; with</code> is followed by a series of possible cases that the variable may satisfy. Some code follows the arrow which will run if that is the case that is satisfied. All cases in a pattern match must return the same value, just like with an if and an else.</p>
<p>Variants can also have some data of any type associated with them. For example:</p>
<pre><code>type colour =
    | Red
    | Green
    | Blue
    | Cyan
    | Magenta
    | Yellow
    | Custom of int * int * int
</code></pre>
<p>This variant represents a colour, as one of a series of different predefined colours. However, it also has a case which allows a custom colour specified by 3 integers as a tuple (benig the RGB values). When constructing an instance of this <code>colour</code> type, we can construct any of the first 6 cases as before, or we can provide a tuple of 3 integers when constructing a <code>colour</code> using the <code>Custom</code> case. This is because <code>Custom</code> is really a function with the signature:</p>
<pre><code>Custom : (int * int * int) -&gt; colour
</code></pre>
<p>So if we want to represent white we can do so with the following code:</p>
<pre><code>let white = Custom (255, 255, 255)
</code></pre>
<p>So how do we pattern match on this? Well we just need to put a variable in place of the tuple here, which will be bound to the value within the <code>Custom</code> case. See below:</p>
<pre><code>match white with
| Red -&gt; (* do something *)
| Green -&gt; (* do something *)
| Blue -&gt; (* do something *)
| Cyan -&gt; (* do something *)
| Magenta -&gt; (* do something *)
| Yellow -&gt; (* do something *)
| Custom x -&gt; (* do something with x, which is a variable of type int * int * int *)
</code></pre>
<p>As we will see more of later on, pattern matching is even more powerful, in that we can deconstruct the tuple with the pattern match itself, by changing the bottom line to:</p>
<pre><code>| Custom (r, g, b) -&gt; (* do something with the variables r, g and b *)
</code></pre>
<p>We'll look more at pattern matching later with more complex data structures and using wildcards, but the above technique will be sufficient for the code we're about to write to construct and manipulate a linked list.</p>
<h3 id="list-type"><a class="header" href="#list-type">List Type</a></h3>
<p>In the case of the type of our list, we are going to use a variant which is recursive. One case for our list is when it is empty, and the other when there is at least one node.</p>
<pre><code>type 'a linked_list =
    | Nil
    | Cons of 'a * 'a linked_list
</code></pre>
<p>The names <code>Nil</code> and <code>Cons</code> are very commonly used in functional programming with a linked list. If you come from a background in C, consider the <code>Nil</code> case as being the end of the list, where the pointer to the next node would be <code>null</code>. The Cons case is for all other nodes.</p>
<p>Note also the use of <code>'a</code> before the name of our type. This is because our type has a <em>type parameter</em>. Every time <code>'a</code> appears in our type definition, it is the same as the type parameter. This allows us to write code that works for lists of any type, since an <code>int linked_list</code> and <code>float linked_list</code> are distinct types that are both linked lists but parameterised on different types.</p>
<p>Now notice the type of the associated data: <code>'a * 'a linked_list</code>. Here <code>'a</code> is the data stored on the given node of the list, and <code>'a linked_list</code> is another instance of our linked list type, meaning that here we have a <em>recursive type</em>. In many other languages this would not be possible, but in OCaml the layer of abstraction just like a pointer in C, or <code>Box&lt;&gt;</code> in Rust is built in.</p>
<p>Now that we have our list structure, to better explain how it works let's create a list of the data [7; 9].</p>
<p>Our list has a starting node of the case <code>Cons</code> with data 7 and a linked list following it which can be represented by [9]. We then construct that list in the same way. This leaves us with a linked list of:</p>
<pre><code>let list =
    Cons(7, Cons(9, Nil))
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../linked_lists/linked_lists.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../linked_lists/general_functions.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../linked_lists/linked_lists.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../linked_lists/general_functions.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3000/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
